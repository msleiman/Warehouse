/*!
 * @preserve
 * jquery.scrolldepth.js | v0.9
 * Copyright (c) 2015 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 * NOTE THAT THIS PLUGIN HAS BEEN CUSTOMISED FOR HOMEPAGE EVENTS AND TO CHANGE THE GA(SEND) EVENT TO GA(MAIN.SEND) EVENT AS WE USE THE 'MAIN' TRACKER - THIS IS A CUSTOM WAREHOUSE MODIFICATION.
 */

!function(e,n,t){"use strict";var r,o,i,l,a={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1},c=e(n),u=[],s=!1,p=0;e.scrollDepth=function(g){function h(e,t,a,c){l?(l({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:g.nonInteraction}),g.pixelDepth&&arguments.length>2&&a>p&&(p=a,l({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:D(a),eventValue:1,eventNonInteraction:g.nonInteraction})),g.userTiming&&arguments.length>3&&l({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:c})):(r&&(n[i]("main.send","event","Scroll",t,{nonInteraction:g.nonInteraction}),g.pixelDepth&&arguments.length>2&&a>p&&(p=a,n[i]("main.send","event","Scroll Depth","Pixel Depth",D(a),1,{nonInteraction:g.nonInteraction})),g.userTiming&&arguments.length>3&&n[i]("main.send","timing","Scroll Depth",e,c,t)),o&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,g.nonInteraction]),g.pixelDepth&&arguments.length>2&&a>p&&(p=a,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",D(a),1,g.nonInteraction])),g.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,c,t,100])))}function f(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function m(n,t,r){e.each(n,function(n,o){-1===e.inArray(n,u)&&t>=o&&(h("Percentage",n,t,r),u.push(n))})}function v(n,t,r){e.each(n,function(n,o){-1===e.inArray(o,u)&&e(o).length&&t>=e(o).offset().top&&(h("Elements",o,t,r),u.push(o))})}function D(e){return(250*Math.floor(e/250)).toString()}function d(){I()}function y(e,n){var t,r,o,i=null,l=0,a=function(){l=new Date,i=null,o=e.apply(t,r)};return function(){var c=new Date;l||(l=c);var u=n-(c-l);return t=this,r=arguments,0>=u?(clearTimeout(i),i=null,l=c,o=e.apply(t,r)):i||(i=setTimeout(a,u)),o}}function I(){s=!0,c.on("scroll.scrollDepth",y(function(){var r=e(t).height(),o=n.innerHeight?n.innerHeight:c.height(),i=c.scrollTop()+o,l=f(r),a=+new Date-S;return u.length>=g.elements.length+(g.percentage?4:0)?(c.off("scroll.scrollDepth"),void(s=!1)):(g.elements&&v(g.elements,i,a),void(g.percentage&&m(l,i,a)))},500))}var S=+new Date;g=e.extend({},a,g),e(t).height()<g.minHeight||(g.gaGlobal?(r=!0,i=g.gaGlobal):"function"==typeof ga?(r=!0,i="ga"):"function"==typeof __gaTracker&&(r=!0,i="__gaTracker"),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(o=!0),"function"==typeof g.eventHandler?l=g.eventHandler:"undefined"==typeof dataLayer||"function"!=typeof dataLayer.push||g.gtmOverride||(l=function(e){dataLayer.push(e)}),e.scrollDepth.reset=function(){u=[],p=0,c.off("scroll.scrollDepth"),I()},e.scrollDepth.addElements=function(n){"undefined"!=typeof n&&e.isArray(n)&&(e.merge(g.elements,n),s||I())},e.scrollDepth.removeElements=function(n){"undefined"!=typeof n&&e.isArray(n)&&e.each(n,function(n,t){var r=e.inArray(t,g.elements),o=e.inArray(t,u);-1!=r&&g.elements.splice(r,1),-1!=o&&u.splice(o,1)})},d())}}(jQuery,window,document);

jQuery.scrollDepth({
  userTiming: false,
  pixelDepth: false,
  nonInteraction: true
});
